[General]
# > tutuçš„surgeé…ç½® æ¬¢è¿ä½¿ç”¨
# > é…ç½®ä¸‹è½½ğ”ğ‘ğ‹ï¼š https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/Surge/Surge.conf
# > ä½¿ç”¨æ•™ç¨‹æŸ¥çœ‹ï¼šhttps://github.com/bunizao/TutuBetterRules/blob/tutu/Surge/README.md
# > èŠ±æ ·å­—ä½“ç”Ÿæˆï¼š https://qwerty.dev/fancy-font-generator/
# > æ¨èè®¢é˜…è½¬æ¢ï¼š https://sub.tuu.cat
# > æœºåœºè½¬ä¹‰ğ„ğğ‚ğğƒğ„ï¼š https://www.urlencoder.org
# > æ›´æ–°é€šçŸ¥telegramé¢‘é“ï¼šhttps://t.me/hututu00
# > ğ”ğ©ğğšğ­ğ: 2023.06.27 22:28
# > ğ•ğŸ.ğŸ‘

# General
http-listen = 0.0.0.0:8888
socks5-listen = 0.0.0.0:8889
external-controller-access = tutu@0.0.0.0:6170

# Lateracy
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204
test-timeout = 3
ipv6 = true
ipv6-vif = auto
show-error-page-for-reject = true

# Advanced
loglevel = notify
exclude-simple-hostnames = true
use-default-policy-if-wifi-not-primary = false
force-http-engine-hosts = boxjs.com, boxjs.net
always-real-ip = *.lan, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, *.*.*.srv.nintendo.net, *.*.stun.playstation.net, xbox.*.*.microsoft.com, *.*.xboxlive.com, stun.*, localhost.ptlogin2.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, music.163.com, *.music.163.com, *.126.net, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, *.kuwo.cn, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.xiami.com, *.music.migu.cn, music.migu.cn, proxy.golang.org, *.mcdn.bilivideo.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, PDC._msDCS.*.*, DC._msDCS.*.*, GC._msDCS.*.*

# DNS
hijack-dns = *:53
dns-server = 119.29.29.29, 223.5.5.5, system
read-etc-hosts = true
doh-skip-cert-verification = true
encrypted-dns-server = https://dns.alidns.com/dns-query
encrypted-dns-follow-outbound-mode = true

# > è·³è¿‡ä»£ç†
skip-proxy = localhost, *.local, passenger.t3go.cn, e.crashlytics.com, captive.apple.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, yunbusiness.ccb.com, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/4, 240.0.0.0/4, ::1/128, fc00::/7, fd00::/8, fe80::/10, ff00::/8, 2001::/32, 2001:db8::/32, 2002::/16, ::ffff:0:0:0:0/1, ::ffff:128:0:0:0/1
# Others
allow-wifi-access = false
hide-vpn-icon = true
allow-hotspot-access = true
# network-framework = true
http-api = tutu@0.0.0.0:2500
http-api-web-dashboard = true
all-hybrid = false
wifi-access-http-port = 1314
udp-priority = true

[Replica]
# 0 ä¸ºå…³é—­ï¼Œ1 ä¸ºå¼€å¯
# > éšè— Apple è¯·æ±‚
hide-apple-request = 0
# > éšè—å´©æºƒè¿½è¸ªå™¨è¯·æ±‚
hide-crash-reporter-request = 1
# > éšè— UDP ä¼šè¯
hide-udp = 0
# > å…³é”®è¯è¿‡æ»¤å™¨
# noneï¼ˆå…³é—­å…³é”®è¯è¿‡æ»¤å™¨ï¼‰ / whitelistï¼ˆblacklistï¼ˆä»…è®°å½•åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ï¼‰ / blacklistï¼ˆä»…è®°å½•ä¸åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ / patternï¼ˆåŒ¹é…é€šé…ç¬¦çš„è¯·æ±‚ï¼‰
# keyword-filter-type = none
# > å…³é”®è¯
# keyword-filter = (null)

[Proxy Group]
# > è¿™æ˜¯ä¸€ä¸ªfinalè§„åˆ™ æ²¡æœ‰å‘½ä¸­çš„è¿æ¥ä¼šèµ°ä»¥ä¸‹çš„ç­–ç•¥ç»„
ğŸ³ï¸â€âš§ï¸ = select, ğŸ¼ Mainland, ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ

# > è¿™æ˜¯ä½ çš„æœºåœºé“¾æ¥å¡«å†™çš„åœ°æ–¹ åœ¨policy_path=åé¢ç²˜è´´ä½ è‡ªå·±æœºåœºçš„è¨‚é–±é€£çµï¼ˆä¸è¦åœ¨è¿™é‡Œç²˜è´´ è°¢è°¢ï¼‰
â„•ğ•–ğ•©ğ•šğ•¥ğ•’ğ•ğ•ğ•ª = select, policy-path=<sublink>
ğ”½ğ•ğ• ğ•¨ğ•–ğ•£â„‚ğ•ğ• ğ•¦ğ•• = select, policy-path=<sublink>

# > ä»¥ä¸‹æ˜¯ç­–ç•¥ç»„ éœ€å…ˆé…ç½®å¥½sub-storeä½¿ç”¨
ğ€ğ¥ğ¥ğ’ğğ«ğ¯ğğ« = select, policy-path=https://sub.store/download/collection/Surge, update-interval=0, no-alert=0, hidden=0
ğğ«ğ¨ğ±ğ² = select, ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ, ğ…ğšğ¥ğ¥ğ›ğšğœğ¤, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States, no-alert=0, hidden=1, include-all-proxies=0
ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ = url-test, policy-path=https://sub.store/download/collection/Surge, url=http://www.gstatic.com/generate_204, interval=600, tolerance=50
ğ…ğšğ¥ğ¥ğ›ğšğœğ¤ = fallback, policy-path=https://sub.store/download/collection/Surge, url=http://www.gstatic.com/generate_204, interval=600, tolerance=50
ğŸ‡­ğŸ‡°Hong Kong = url-test, policy-path=https://sub.store/download/collection/Surge, policy-regex-filter=æ¸¯|ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|Hong, interval=600, tolerance=50,update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0
ğŸ‡¨ğŸ‡³Taiwan = url-test, policy-path=https://sub.store/download/collection/Surge, policy-regex-filter=å°|ğŸ‡¨ğŸ‡³|å°æ¹¾|TW|Tai, interval=600, tolerance=50,update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0
ğŸ‡¯ğŸ‡µJapan = url-test, policy-path=https://sub.store/download/collection/Surge, policy-regex-filter=æ—¥|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|Japan, interval=600, tolerance=50,update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0
ğŸ‡¸ğŸ‡¬Singapore = url-test, policy-path=https://sub.store/download/collection/Surge, policy-regex-filter=å¡|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore, interval=600, tolerance=50,update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0
ğŸ‡ºğŸ‡¸United States = url-test, policy-path=https://sub.store/download/collection/Surge, policy-regex-filter=ç¾|ğŸ‡ºğŸ‡¸|ç¾å›½|US|States|American, interval=600, tolerance=50,update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0
ğŸ¼ Mainland = select, DIRECT, hidden=1
ï£¿ ğ‘¨ğ’‘ğ’‘ğ’ğ’† = select, ğŸ¼ Mainland, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ“º ğ’ƒğ’Šğ’ğ’Šğ’ƒğ’Šğ’ğ’Š = select, ğŸ¼ Mainland, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan
ğŸ¥ ğ‘«ğ’Šğ’”ğ’ğ’†ğ’š+ = select, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¸ğŸ‡¬Singapore
ğŸ¥ ğ‘µğ’†ğ’•ğ’‡ğ’ğ’Šğ’™ = select, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ’µ ğ‘·ğ’‚ğ’šğ‘·ğ’‚ğ’ = select, ğŸ¼ Mainland, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡ºğŸ‡¸United States
âœ‰ï¸ ğ‘»ğ’†ğ’ğ’†ğ’ˆğ’“ğ’‚ğ’ = select, ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡ºğŸ‡¸United States
ğŸ¬ ğ‘»ğ’Šğ’Œğ‘»ğ’ğ’Œ = select, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ‘¾ ğğ©ğğ§ğ€ğˆ = select, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ•Šï¸ ğ‘»ğ’˜ğ’Šğ’•ğ’•ğ’†ğ’“ = select, ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ“¹ ğ’€ğ’ğ’–ğ‘»ğ’–ğ’ƒğ’† = select, ğ€ğ®ğ­ğ¨ğ¦ğšğ­ğ¢ğœ, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States
ğŸ§£ ğ‘¾ğ’†ğ’Šğ’ƒğ’ = select, ğŸ¼ Mainland, ğŸ‡­ğŸ‡°Hong Kong, ğŸ‡¨ğŸ‡³Taiwan, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan, ğŸ‡ºğŸ‡¸United States, ğ€ğ¥ğ¥ğ’ğğ«ğ¯ğğ«

[Rule]
# ban UDP on Youtube
# AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP

# > Direct(Google|Proxy|Download|Spotify)
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Direct.list,DIRECT

# > Mail
DOMAIN-SUFFIX,smtp,DIRECT
URL-REGEX,(Subject|HELO|SMTP),DIRECT

# ------Rulesets (è§„åˆ™é›†ï¼‰------
# > Whitelist
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Whitelist_Proxy.list,ğğ«ğ¨ğ±ğ²

# Anti-AD
RULE-SET,https://ruleset.isagood.day/reject.conf,REJECT
DOMAIN-SET,https://ruleset.isagood.day/reject_tinygif.conf,REJECT-TINYGIF
DOMAIN-SET,https://ruleset.isagood.day/reject_domain.conf,REJECT
RULE-SET,https://ruleset.isagood.day/reject_drop.conf,REJECT-DROP

# > Stream Media
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list,ğŸ“º ğ’ƒğ’Šğ’ğ’Šğ’ƒğ’Šğ’ğ’Š
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,ğŸ¥ ğ‘«ğ’Šğ’”ğ’ğ’†ğ’š+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,ğŸ¥ ğ‘µğ’†ğ’•ğ’‡ğ’ğ’Šğ’™
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AbemaTV/AbemaTV.list,ğŸ‡¯ğŸ‡µJapan //AbemaTV
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Peacock/Peacock.list,ğŸ‡ºğŸ‡¸United States //Peacock
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBOUSA/HBOUSA.list,ğŸ‡ºğŸ‡¸United States // HBO NOW && HBO MAX

# > PayPal: æ³¨æ„ï¼Œä¸é‡‘èæœ‰å…³çš„å¢ƒå¤–æœåŠ¡å»ºè®®å›ºå®šè®¿é—®ip.
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/PayPal.list,ğŸ’µ ğ‘·ğ’‚ğ’šğ‘·ğ’‚ğ’
# >Telegram
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Telegram.list,âœ‰ï¸ ğ‘»ğ’†ğ’ğ’†ğ’ˆğ’“ğ’‚ğ’
# > TikTok
RULE-SET,https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Surge/TikTok.list,ğŸ¬ ğ‘»ğ’Šğ’Œğ‘»ğ’ğ’Œ
# > ChatGPT
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/OpenAI.list,ğŸ‘¾ ğğ©ğğ§ğ€ğˆ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list,ğŸ•Šï¸ ğ‘»ğ’˜ğ’Šğ’•ğ’•ğ’†ğ’“
# > Youtube & Google Search
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,ğŸ“¹ ğ’€ğ’ğ’–ğ‘»ğ’–ğ’ƒğ’†
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Google_Search.list,ğŸ‡ºğŸ‡¸United States
# > Apple
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Apple_Direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AppleNews/AppleNews.list,ğŸ‡ºğŸ‡¸United States
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Apple_Proxy.list,ğğ«ğ¨ğ±ğ²
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,ï£¿ ğ‘¨ğ’‘ğ’‘ğ’ğ’†
# > Weibo
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Weibo/Weibo.list,ğŸ§£ ğ‘¾ğ’†ğ’Šğ’ƒğ’

# > WeChat æ ¹æ®ä½ è‡ªå·±çš„Wechat DCé€‰æ‹©ç­–ç•¥
#RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/WeChat.list,ğŸ‡¸ğŸ‡¬Singapore
#RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/WeChat.list,ğŸ‡ºğŸ‡¸United States
# > Global
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Global.list,ğğ«ğ¨ğ±ğ²
# > China
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,DIRECT
# > Local Area Network å±€åŸŸç½‘
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT
IP-CIDR,100.64.0.0/10,DIRECT
IP-CIDR,224.0.0.0/4,DIRECT
RULE-SET,LAN,DIRECT
# > ASN China
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list,DIRECT
# > GeoIP China(è‹¥å¯ç”¨ï¼Œåˆ™éœ€ç¦ç”¨ ASN)
# GEOIP,CN,DIRECT
# > DNS æŸ¥è¯¢å¤±è´¥èµ° Final è§„åˆ™
FINAL,ğŸ³ï¸â€âš§ï¸,dns-failed

[Host]
# > è¯¥æ®µå®šä¹‰æœ¬åœ° DNS è®°å½•
# > è¯¥åŠŸèƒ½ç­‰åŒäº /etc/hostsï¼ŒåŠ ä¸Šäº†æ³›è§£æå’Œåˆ«åæ”¯æŒã€‚

[URL Rewrite]
# > å»ºè®®å¼•ç”¨æ¨¡å—ï¼š
 # - https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/Surge/module/All-in-One.sgmodule æœ€å¼ºåŠ›çš„å»å¹¿å‘Šæ¨¡å—
 # - https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/Surge/module/All-in-One-2.x.sgmodule æœ€å¼ºåŠ›çš„å»å¹¿å‘Šæ¨¡å— è¿›é˜¶ç‰ˆ
 # - https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/Surge/module/SurgePro.sgmodule Surge å¢å¼º
     # è¯¦æƒ…è¯·è§ https://t.me/hututu00/470

[Script]
Sub-Store Core=type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout=120,ability=http-client-policy
Sub-Store Simple=type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true
Sub-Store Sync=type=cron,cronexp=0 0 * * *,wake-system=1,timeout=120,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js
Rewrite: BoxJs = type=http-request,pattern=https?:\/\/boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, requires-body=true, timeout=120

[MITM]
hostname = sub.store
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = sub.store
