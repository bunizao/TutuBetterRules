#
#Tutuæ­£åœ¨å†…æµ‹ï¼Œä¸å»ºè®®ç°åœ¨å¼•ç”¨æœ¬é…ç½®ã€‚
# Quantumult Configuration DivineEngine ver. (åŸºäº Quantumult X 1.0.29-678 ç¤ºä¾‹é…ç½®æ–‡ä»¶ä¿®æ”¹)
# 
# ä»¥ ";" æˆ– "#" æˆ– "//" å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œï¼Œåˆ å»æ³¨é‡Šç¬¦å·æœ¬è¡Œæ‰ä¼šç”Ÿæ•ˆã€‚
#
# SS-URI scheme è¯·å‚è€ƒ https://github.com/shadowsocks/shadowsocks-org/wiki/SIP002-URI-Scheme
#
# Quantumult ä½¿ç”¨ HTTP HEAD æ–¹æ³•å¯¹æµ‹è¯•ç½‘å€ server_check_url è¿›è¡Œç½‘é¡µå“åº”æ€§æµ‹è¯• (æµ‹è¯•ç»“æœä¸ºé€šè¿‡è¯¥èŠ‚ç‚¹è®¿é—®æ­¤ç½‘é¡µè·å¾— HTTP å“åº”æ‰€éœ€è¦çš„æ—¶é—´), æ¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§.
# Quantumult ç•Œé¢ä¸­çš„å»¶è¿Ÿæµ‹è¯•æ–¹å¼å‡ä¸ºç½‘é¡µå“åº”æ€§æµ‹è¯•, æ˜¾ç¤ºçš„æœ€ç»ˆå»¶è¿Ÿå‡ä¸ºé€šè¿‡å¯¹åº”èŠ‚ç‚¹è®¿é—®æµ‹è¯•ç½‘é¡µçš„ HTTP å»¶è¿Ÿ.
# ç”±äº Trojan åè®®ä¸ºæ— å“åº”æ ¡éªŒåè®®, ä½¿å¾— HTTP æ£€æµ‹æ–¹å¼å³ä½¿è·å¾—äº† HTTP å“åº”, ä¹Ÿä¸ä»£è¡¨èŠ‚ç‚¹ä¸€å®šå¯ç”¨.
#
# dns_exclusion_list åŒ…å«éœ€è¦å…³é—­ placeholder IP(198.18.0.0/15) çš„åŸŸååˆ—è¡¨, ä¸åœ¨ dns_exclusion_list åˆ—è¡¨ä¸­çš„æ‰€åŸŸåå°†é»˜è®¤å¼€å¯ placeholder IP å¹¶å¯ç”¨ resolve-on-remote (è¿œç«¯è§£æ DNS), dns_exclusion_list ä¸­åŸŸçš„ DNS æŸ¥è¯¢å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šéµå¾ª [dns] éƒ¨åˆ†ä¸­çš„è®¾ç½®.
#
# udp_whitelist åŒ…å«ç›®çš„åœ°çš„ UDP ç«¯å£, å¦‚æœç•™ç©ºåˆ™é»˜è®¤è¡¨ç¤ºæ‰€æœ‰çš„ç«¯å£éƒ½åœ¨ udp_whitelist ä¸­. å¦‚æœå¸¦æœ‰ç›®çš„åœ°ç«¯å£ UDP åŒ… (é€šè¿‡ Quantumult tunnel interface) ä¸åœ¨ udp_whitelist ä¸­, è¯¥ UDP åŒ…å°†ä¼šè¢«ä¸¢å¼ƒ. æ­¤é¡¹è®¾ç½®ä¸ä¼šå½±å“ç­–ç•¥æˆ–ä»£ç†æœåŠ¡å™¨.
#
# udp_drop_list åŒ…å«ç›®çš„åœ°çš„ UDP ç«¯å£, æœºåˆ¶ç±»ä¼¼äº udp_whitelist ä¸¢å¼ƒ UDP æ•°æ®åŒ…,ä½†ä¸ä¼šå‘å› ICMP æ¶ˆæ¯. åªæœ‰ udp_whitelist å…è®¸çš„ UDP æ•°æ®åŒ…æ‰èƒ½è¢« udp_drop_list æ•è·.
#
# Quantumult X å°†ä¸ä¼šå¤„ç†å‘ excluded_routes åˆ—è¡¨ä¸­è¯·æ±‚çš„æµé‡. å½“ä½ æ¯æ¬¡ä¿®æ”¹è¿™ä¸ªé…ç½®æ—¶, æœ€å¥½é‡æ–°å¯åŠ¨ä½ çš„è®¾å¤‡.
#
# resource_parser_url çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹å¯ä»¥å‚è€ƒ https://raw.githubusercontent.com/crossutility/Quantumult-X/master/resource-parser.js
#-----------------------------------------------------------------------------------------------------------------------------

[general]
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
server_check_url=http://www.gstatic.com/generate_204
geo_location_checker=http://ip-api.com/json/?lang=en-US, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, open.e.189.cn
excluded_routes=239.255.255.250/32

#
# ä¸ºä¿è¯è·å¾—æœ€ä½³çš„ DNS è§£ææ€§èƒ½ä½“éªŒ, Quantumult X é»˜è®¤æ€»æ˜¯ä»å½“å‰ç½‘ç»œ (ç³»ç»Ÿé…ç½®) çš„ DNS æœåŠ¡å™¨è·å–è§£æç»“æœ, ä½†ä½ å¯ä»¥ä½¿ç”¨ no-system å‚æ•°æ¥å…³é—­æ­¤æ“ä½œ, ä½†æ˜¯å¿…é¡»è‡³å°‘å®šä¹‰ä¸€ä¸ª DNS æœåŠ¡å™¨, å¦‚ "server=223.5.5.5".
# å¯ç”¨ no-ipv6 æ—¶, Quantumult X Tunnel çš„ DNS æ¨¡å—ä¼šç›´æ¥è®© AAAA æŸ¥è¯¢å¤±è´¥ï¼Œä½†ä»ç„¶å…è®¸æ¥è‡ª IPv6 DNS æœåŠ¡å™¨çš„ A æŸ¥è¯¢.
# DNS è§£æç»“æœä»…ç”¨äº ç›´è¿(direct) è§„åˆ™å’Œåˆ¤å®š IP åˆ†æµæ¡ä»¶, è€Œä¸ä¼šç”¨äº ä»£ç† çš„è§„åˆ™ç­–ç•¥ (DNS æŸ¥è¯¢åœ¨è¿œç«¯æœåŠ¡å™¨è§£æ), Quantumult ä¸ä¼šè·å¾—ç›®çš„ IP å’Œç›¸å…³çš„åŸŸå.
# å½“è®¾ç½®äº† doh-server æ—¶æ‰€æœ‰å…¶ä»–å¸¸è§„ (æ²¡æœ‰ä¸ä¹‹ç›¸å…³çš„ç‰¹å®šåŸŸ) DNS æœåŠ¡å™¨å°†è¢«å¿½ç•¥.
# Multiple(å¹¶å‘æŸ¥è¯¢) doh-server(s) åº”é…ç½®åœ¨ä¸€è¡Œä¸­, URL åº”ä»¥é€—å·åˆ†éš”. å¦‚æœ iOS ç‰ˆæœ¬ < 13.0, æœ€å¤šè®¾ç½®1ä¸ª doh-server. å¦‚æœ iOS ç‰ˆæœ¬ < 15.0, æœ€å¤šè®¾ç½®2ä¸ªdoh-server.
# å½“ä½¿ç”¨çš„ doh-server ä¸æ˜¯åŸºäº HTTP/2 æ—¶, é‡å¯ VPN è¿æ¥ä¹‹å‰ DoH å°†è¢«æš‚æ—¶ç¦ç”¨å¹¶ä½¿ç”¨å¸¸è§„ DNS æœåŠ¡å™¨.
# æ­¤å¤„ä¸å…è®¸å°†ç‰¹å®šçš„åŸŸåæŒ‡å‘ 127.0.0.1. å¦‚æœä½ æƒ³å°†æŸä¸ªåŸŸåæŒ‡å‘ 127.0.0.1 å¦‚ example.com, ä½ å¯ä»¥ç›´æ¥åœ¨ "filter_local" ä¸­æ·»åŠ  "host, example.com, reject" æ¥å®ç°. è¿™ä¸€æ“ä½œå°†ä¼šè®©åŸŸåçš„ DNS ç»“æœè¿”å› 127.0.0.1.
#
[dns]
#!name=ğŸŒ DNS for Router and Companys
#!desc=1.æŒ‰ä¼ä¸š/å…¬å¸åˆ†æµä½¿ç”¨æ‰€å±DNSè¿›è¡Œè§£æ 2.è·¯ç”±å™¨åœ°å€ä½¿ç”¨ç³»ç»ŸDNSè¿›è¡Œè§£æ
#!author=VirgilClyne
#!homepage=https://github.com/VirgilClyne/VirgilClyne/blob/main/modules/DNS/README.md
#!icon=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Server.png

# > å¤‡ç”¨ DoH èŠ‚ç‚¹ ä¾¿äºæ•…éšœåˆ‡æ¢
# > å¹³å° | å›½å†…è¯·æ±‚å‡é€Ÿ
# IBM
# https://dns.quad9.net/dns-query 182ms
# https://dns9.quad9.net/dns-query 203ms

# iQDNS
# https://worldwide.passcloud.xyz/dns-query (å…¨çƒéšæœº) 255ms
# https://a.passcloud.xyz/dns-query (Anycast é»˜è®¤åœ°å€) 56ms

# AdGuard
# https://dns.adguard.com/dns-query 202ms
# https://dns-family.adguard.com/dns-query 230ms
# https://dns-unfiltered.adguard.com/dns-query 262ms

# DNS.SB
# https://doh.dns.sb/dns-query 92ms

# > Modify Contents
# Firebase Cloud Messaging
address = /talk.google.com/108.177.125.188
address = /mtalk.google.com/108.177.125.188
address = /alt1-mtalk.google.com/3.3.3.3
address = /alt2-mtalk.google.com/3.3.3.3
address = /alt3-mtalk.google.com/74.125.200.188
address = /alt4-mtalk.google.com/74.125.200.188
address = /alt5-mtalk.google.com/3.3.3.3
address = /alt6-mtalk.google.com/3.3.3.3
address = /alt7-mtalk.google.com/74.125.200.188
address = /alt8-mtalk.google.com/3.3.3.3
# Google CDN
doh-server = /blog.google/https://doh.pub/dns-query
doh-server = /googletraveladservices.com/https://doh.pub/dns-query
doh-server = /dl.google.com/https://doh.pub/dns-query
doh-server = /dl.l.google.com/https://doh.pub/dns-query
doh-server = /clientservices.googleapis.com/https://doh.pub/dns-query
doh-server = /update.googleapis.com/https://doh.pub/dns-query
doh-server = /translate.googleapis.com/https://doh.pub/dns-query
doh-server = /fonts.googleapis.com/https://doh.pub/dns-query
doh-server = /fonts.gstatic.com/https://doh.pub/dns-query

# > Router Admin Panel
# Ubiquiti Unifi Controller
server = /unifi.ui.com/system
server = /networks.unifi.ui.com/system
# Ubiquiti Amplifi Router
server = /amplifi.lan/system
# Synology Router
server = /router.synology.com/system
# Razer Sila Router
server = /sila.razer.com/system
# Asus Router
server = /router.asus.com/system
# Netgear Router
server = /routerlogin.net/system
# Netgear Obri Router
server = /orbilogin.com/system
# Linksys Router
server = /www.LinksysSmartWiFi.com/system
server = /LinksysSmartWiFi.com/system
server = /myrouter.local/system
# Xiaomi Mi WiFi Router
server = /www.miwifi.com/system
server = /miwifi.com/system
# Huawei Router
server = /mediarouter.home/system
# TP-Link Router
server = /tplogin.cn/system
server = /tplinklogin.net/system
# MERCURY Router
server = /melogin.cn/system
# FAST Router
server = /falogin.cn/system

# > Apple
doh-server = /networking.apple/https://doh.dns.apple.com/dns-query
# Apple.com
# doh-server = /*.apple.com/https://doh.dns.apple.com/dns-query
# iCloud.com
doh-server = /*.icloud.com/https://doh.dns.apple.com/dns-query

# > Alphabet
doh-server = /*.google/https://dns.google/dns-query
doh-server = /*.google.com/https://dns.google/dns-query
doh-server = /*.google.com.??/https://dns.google/dns-query
# Google sites
# doh-server = /*.goog/https://dns.google/dns-query
# Google é™æ€èµ„æº
doh-server = /*.gstatic.com/https://dns.google/dns-query
# Google Photos
doh-server = /*.ggpht.com/https://dns.google/dns-query
# Google ç”¨æˆ·ä¸Šä¼ æ•°æ®
doh-server = /*.googleusercontent.com/https://dns.google/dns-query
# Google APIs
# doh-server = /*.googleapis.com/https://dns.google/dns-query
# Google backbone
doh-server = /*.1e100.net/https://dns.google/dns-query
# Youtube sites
doh-server = /*.youtube/https://dns.google/dns-query
# Youtube
doh-server = /*.youtube.com/https://dns.google/dns-query
# Youtube å›¾ç‰‡
doh-server = /*.ytimg.com/https://dns.google/dns-query
# Youtube Video
doh-server = /*.googlevideo.com/https://dns.google/dns-query
# Google Video Thumbnails
doh-server = /*.gvt?.com/https://dns.google/dns-query
# reCaptcha
doh-server = /*.recaptcha.net/https://dns.google/dns-query
# Gmail
doh-server = /*.gmail.com/https://dns.google/dns-query
# Google Source
doh-server = /*.googlesource.com/https://dns.google/dns-query
# Google AD Services
doh-server = /*.googleadservices.com/https://dns.google/dns-query
# DoubleClick
doh-server = /*.doubleclick.net/https://dns.google/dns-query
# AdSense
doh-server = /*.adsense.com/https://dns.google/dns-query
# AdSense Custom Search Ads
doh-server = /*.adsensecustomsearchads.com/https://dns.google/dns-query
# AdSense for mobile apps
doh-server = /*.adsenseformobileapps.com/https://dns.google/dns-query
# Google shortened URLs
doh-server = /*.gle/https://dns.google/dns-query
# Google URL Shortener
doh-server = /goo.gl/https://dns.google/dns-query

# > Cloudflare
doh-server = /*.cloudflare.com/https://cloudflare-dns.com/dns-query
# Cloudflare Stream
doh-server = /*.cloudflarestream.com/https://cloudflare-dns.com/dns-query
# Cloudflare Client
doh-server = /*.cloudflareclient.com/https://cloudflare-dns.com/dns-query
# Cloudflare Web Analytics
doh-server = /*.cloudflareinsights.com/https://cloudflare-dns.com/dns-query
# Cloudflare 1.1.1.1
doh-server = /*.every1dns.net/https://cloudflare-dns.com/dns-query
# Cloudflare SSL Certificate
# doh-server = /*.cloudflaressl.com/https://cloudflare-dns.com/dns-query
# Cloudflare DNS
doh-server = /*.cloudflare-dns.com/https://cloudflare-dns.com/dns-query
# CloudFlare Workers
doh-server = /*.workers.dev/https://cloudflare-dns.com/dns-query

# > é˜¿é‡Œå·´å·´
doh-server = /*.alibaba.cn/https://dns.alidns.com/dns-query
doh-server = /*.alibaba.com.cn/https://dns.alidns.com/dns-query
# Alibaba ä¸­å›½
doh-server = /*.china.alibaba.com/https://dns.alidns.com/dns-query
# 1688
doh-server = /*.1688.com/https://dns.alidns.com/dns-query
# æ·˜å®
doh-server = /*.taobao.com/https://dns.alidns.com/dns-query
# æ·˜å® ç¼“å­˜
doh-server = /*.tbcache.com/https://dns.alidns.com/dns-query
# å¤©çŒ«
doh-server = /*.tmall.com/https://dns.alidns.com/dns-query
# é˜¿é‡Œ CDN
doh-server = /*.alicdn.com/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘ç›˜
doh-server = /*.aliyundrive.com/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘
doh-server = /*.aliyun.*/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘ CDN
doh-server = /*.aliyuncdn.*/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘ DDoSé˜²æŠ¤
doh-server = /*.aliyunddos????.com/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘APIæœåŠ¡
doh-server = /*.aliyuncs.com/https://dns.alidns.com/dns-query
# é˜¿é‡Œäº‘Webåº”ç”¨é˜²ç«å¢™
doh-server = /*.aliyundunwaf.com/https://dns.alidns.com/dns-query
# äº‘å¼•æ“åº”ç”¨å¹³å°
doh-server = /*.aliapp.com/https://dns.alidns.com/dns-query
# ä¸Šäº‘å¹³å°
doh-server = /*.aliapp.org/https://dns.alidns.com/dns-query
# é˜¿é‡Œç”¨æˆ·ä¸Šä¼ èµ„æ–™
doh-server = /*.alibabausercontent.com/https://dns.alidns.com/dns-query
# mmstat æ•°æ®ç»Ÿè®¡ å¹¿å‘Šè¿½è¸ª
doh-server = /*.mmstat.com/https://dns.alidns.com/dns-query
# æ·˜å®çŸ­ç½‘å€
doh-server = /tb.cn/https://dns.alidns.com/dns-query

# > èš‚èšé›†å›¢
doh-server = /*.alipay.com/https://dns.alidns.com/dns-query
doh-server = /*.alipay.com.cn/https://dns.alidns.com/dns-query
# æ”¯ä»˜å® HTTP DNS
doh-server = /*.alipaydns.com/https://dns.alidns.com/dns-query
# æ”¯ä»˜å® å•†å®¶èµ„æº
doh-server = /*.alipayeshop.com/https://dns.alidns.com/dns-query
# æ”¯ä»˜å® Mdap
doh-server = /*.alipaylog.com/https://dns.alidns.com/dns-query
# æ”¯ä»˜å® é™æ€èµ„æº
doh-server = /*.alipayobjects.com/https://dns.alidns.com/dns-query
# æ”¯ä»˜å® å¼€æ”¾æŠ€æœ¯ç”Ÿæ€ä½“ç³»
doh-server = /*.alipay-eco.com/https://dns.alidns.com/dns-query

# > è…¾è®¯
doh-server = /*.tencent.com/https://doh.pub/dns-query
# è…¾è®¯äº‘
doh-server = /*.qcloud.com/https://doh.pub/dns-query
# è…¾è®¯äº‘CDN
doh-server = /*.qcloudcdn.cn/https://doh.pub/dns-query
doh-server = /*.qcloudcdn.com/https://doh.pub/dns-query
# è…¾è®¯äº‘å¯¹è±¡å‚¨å­˜
doh-server = /*.qcloudcos.com/https://doh.pub/dns-query
# è…¾è®¯äº‘é™æ€èµ„æº
doh-server = /*.qcloudimg.com/https://doh.pub/dns-query
# è…¾è®¯äº‘è¶…çº§ç®¡å®¶
doh-server = /*.qcloudcjgj.com/https://doh.pub/dns-query
# è…¾è®¯äº‘ç½‘ç«™ç®¡å®¶
doh-server = /*.qcloudwzgj.com/https://doh.pub/dns-query
# è…¾è®¯äº‘ä¸»é¡µç®¡å®¶
doh-server = /*.qcloudzygj.com/https://doh.pub/dns-query
# è…¾è®¯å¼€æ”¾äº‘
doh-server = /*.myqcloud.com/https://doh.pub/dns-query
# è…¾è®¯äº‘
doh-server = /*.tencent-cloud.net/https://doh.pub/dns-query
# è…¾è®¯äº‘aiotè§£å†³æ–¹æ¡ˆ
doh-server = /*.tencentcloud-aiot.com/https://doh.pub/dns-query
# è…¾è®¯äº‘API
doh-server = /*.tencentcloudapi.com/https://doh.pub/dns-query
# è…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡TCR
doh-server = /*.tencentcloudcr.com/https://doh.pub/dns-query
# è…¾è®¯äº‘äº‘å¸‚åœº
doh-server = /*.tencentcloudmarket.com/https://doh.pub/dns-query
# QQ
doh-server = /*.qq.com/https://doh.pub/dns-query
# è…¾è®¯å¤´åƒ
doh-server = /*.qlogo.cn/https://doh.pub/dns-query
# è…¾è®¯å›¾ç‰‡
doh-server = /*.qpic.cn/https://doh.pub/dns-query
# å¾®ä¿¡
doh-server = /*.weixin.qq.com/https://doh.pub/dns-query
doh-server = /*.wx.qq.com/https://doh.pub/dns-query
doh-server = /*.weixin.com/https://doh.pub/dns-query
# å¾®ä¿¡å…¬ä¼—å¹³å°
doh-server = /*.weixinbridge.com/https://doh.pub/dns-query
# WeChat
doh-server = /*.wechat.com/https://doh.pub/dns-query
# å¾®ä¿¡å°ç¨‹åº
doh-server = /*.servicewechat.com/https://doh.pub/dns-query
# å¾®äº‘
doh-server = /*.weiyun.com/https://doh.pub/dns-query
# è…¾è®¯ å›¾ç‰‡ é™æ€èµ„æº
doh-server = /*.gtimg.cn/https://doh.pub/dns-query
doh-server = /*.idqqimg.com/https://doh.pub/dns-query
# è…¾è®¯ é™æ€èµ„æº CDN
doh-server = /*.cdn-go.cn/https://doh.pub/dns-query
# è…¾è®¯äº‘ æ™ºèƒ½äº‘è§£æDNS
doh-server = /*.smtcdns.com/https://doh.pub/dns-query
doh-server = /*.smtcdns.net/https://doh.pub/dns-query
# è…¾è®¯çŸ­ç½‘å€
doh-server = /url.cn/https://doh.pub/dns-query

# > ç™¾åº¦
server = /*.baidu/180.76.76.76
server = /*.baidu.com/180.76.76.76
# ç™¾åº¦ é™æ€èµ„æº
server = /*.bdimg.com/180.76.76.76
server = /*.bdstatic.com/180.76.76.76
# ç™¾åº¦ç½‘ç›˜
server = /*.baidupcs.*/180.76.76.76
# ç™¾åº¦äº‘CDN
server = /*.baiduyuncdn.*/180.76.76.76
# ç™¾åº¦äº‘DNS
server = /*.baiduyundns.*/180.76.76.76
# ç™¾åº¦äº‘ DNS
server = /*.bdydns.*/180.76.76.76
# ç™¾åº¦äº‘ CDN
server = /*.bdycdn.*/180.76.76.76
# ç™¾åº¦äº‘ åŸŸå
server = /*.bdysite.com/180.76.76.76
server = /*.bdysites.com/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘
server = /*.baidubce.*/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘ DNS
server = /*.bcedns.*/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘ å¯¹è±¡å­˜å‚¨BOS
server = /*.bcebos.com/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘ æ’­æ”¾å™¨æœåŠ¡
server = /*.bcevod.com/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘ å›¾ç‰‡æœåŠ¡
server = /*.bceimg.com/180.76.76.76
# ç™¾åº¦æ™ºèƒ½äº‘ ä¸»æœº
server = /*.bcehost.com/180.76.76.76
server = /*.bcehosts.com/180.76.76.76
# ç™¾åº¦çŸ­ç½‘å€
server = /dwz.cn/180.76.76.76

# > 360
# 360å®‰å…¨ä¸­å¿ƒ
doh-server = /*.360.cn/https://doh.360.cn/dns-query
# 360å®‰å…¨å«å£«
doh-server = /*.360safe.com/https://doh.360.cn/dns-query
# 360å¿«èµ„è®¯
doh-server = /*.360kuai.com/https://doh.360.cn/dns-query
# 360æœç´¢
doh-server = /*.so.com/https://doh.360.cn/dns-query
# 360ç½‘é¡µå¿«ç…§æœåŠ¡
doh-server = /*.360webcache.com/https://doh.360.cn/dns-query
# å¥‡è™api
doh-server = /*.qihuapi.com/https://doh.360.cn/dns-query
# 360å›¾åºŠ
doh-server = /*.qhimg.com/https://doh.360.cn/dns-query
doh-server = /*.qhimgs.com/https://doh.360.cn/dns-query
doh-server = /*.qhimgs?.com/https://doh.360.cn/dns-query
# 360
doh-server = /*.qhmsg.com/https://doh.360.cn/dns-query
# å¥‡è™é™æ€èµ„æº
doh-server = /*.qhres.com/https://doh.360.cn/dns-query
doh-server = /*.qhres?.com/https://doh.360.cn/dns-query
# å¯¼èˆªé™æ€æ–‡ä»¶
doh-server = /*.dhrest.com/https://doh.360.cn/dns-query
# 360
doh-server = /*.qhupdate.com/https://doh.360.cn/dns-query
# 360å®‰å…¨äº‘ç›˜
doh-server = /*.yunpan.cn/https://doh.360.cn/dns-query
doh-server = /*.yunpan.com.cn/https://doh.360.cn/dns-query
doh-server = /*.yunpan.com/https://doh.360.cn/dns-query
# 360çŸ­ç½‘å€
doh-server = /urlqh.cn/https://doh.360.cn/dns-query

# > BiliBili
server = /*.bilibili.com/system
# BiliBili API
server = /*.biliapi.com/system
server = /*.biliapi.net/system
# BiliBili CDN
server = /*.bilicdn?.com/system
# BiliBili é™æ€èµ„æº
server = /*.hdslb.com/system
server = /*.hdslb.net/system
# BiliBili è§†é¢‘
server = /cn-hk-eq-bcache-??.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆakamaiï¼‰
server = /upos-hz-mirrorakam.akamaized.net/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆasia-abroad.comï¼‰
server = /upos-sz-mirrorasiaov.bilibilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ï¼‰
doh-server = /upos-sz-mirrorali.bilivideo.com/https://dns.alidns.com/dns-query
doh-server = /upos-sz-mirrorali?.bilivideo.com/https://dns.alidns.com/dns-query
doh-server = /upos-sz-mirrorali??.bilivideo.com/https://dns.alidns.com/dns-query
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç™¾åº¦äº‘ï¼‰
server = /upos-sz-mirrorbos.bilivideo.com/180.76.76.76
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
doh-server = /upos-sz-mirrorcos.bilivideo.com/https://doh.pub/dns-query
doh-server = /upos-sz-mirrorcos?.bilivideo.com/https://doh.pub/dns-query
doh-server = /upos-sz-mirrorcos??.bilivideo.com/https://doh.pub/dns-query
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ï¼‰
server = /upos-sz-mirrorhw.bilivideo.com/system
server = /upos-sz-mirrorhw?.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé‡‘å±±äº‘ï¼‰
server = /upos-sz-mirrorks3.bilivideo.com/system
server = /upos-sz-mirrorks3?.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆä¸ƒç‰›äº‘ï¼‰
server = /upos-sz-mirrorkodo.bilivideo.com/system
server = /upos-sz-mirrorkodo?.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç½‘å®¿ï¼‰
server = /upos-sz-mirrorwcs.bilivideo.com/system
server = /upos-sz-mirrorwcs?.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè¿…é›·ï¼‰
server = /upos-sz-mirrorxycdn.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç™¾åº¦äº‘ï¼‰
server = /upos-sz-upcdnbd??.bilivideo.com/180.76.76.76
# BiliBili uposè§†é¢‘æœåŠ¡å™¨
server = /upos-sz-upcdnhw.bilivideo.com/system
# BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
doh-server = /upos-sz-upcdntx.bilivideo.com/https://doh.pub/dns-query
# BiliBili uposè§†é¢‘æœåŠ¡å™¨
server = /upos-sz-upcdnws.bilivideo.com/system
server = /upos-tf-all-js.bilivideo.com/system
# BiliBili mCDNè§†é¢‘æœåŠ¡å™¨
server = /*.mcdn.bilivideo.com/system
# BiliBili è§†é¢‘
server = /*.bilivideo.com/system
server = /*.bilivideo.cn/system
# BiliBiliçŸ­ç½‘å€
server = /acg.tv/system

# > äº¬ä¸œ
server = /*.jd.com/system
# äº¬ä¸œ é™æ€èµ„æº
server = /*.360buyimg.com/system
# äº¬ä¸œäº‘
server = /*.jdcloud.com/system
# äº¬ä¸œäº‘ ç¼“å­˜å’Œå­˜å‚¨
server = /*.jcloudstatic.com/system
# äº¬ä¸œäº‘ é™æ€èµ„æº
server = /*.jcloudstatic.net/system
# äº¬ä¸œäº‘ å…¨å±€è´Ÿè½½å‡è¡¡
server = /*.jdgslb.com/system
# äº¬ä¸œçŸ­ç½‘å€
server = /3.cn/system

# > iQDNS
doh-server = /*.iqdns.xyz/https://a.passcloud.xyz/dns-query
doh-server = /*.iqdnsio.co/https://a.passcloud.xyz/dns-query
doh-server = /*.iqiq.io/https://a.passcloud.xyz/dns-query
doh-server = /*.passcloud.xyz/https://a.passcloud.xyz/dns-query
# iQZone
doh-server = /uuu.glass/https://a.passcloud.xyz/dns-query
doh-server = /*.uuu.glass/https://a.passcloud.xyz/dns-query
doh-server = /*.uuuglass.co/https://a.passcloud.xyz/dns-query
doh-server = /*.leoddns.cn/https://a.passcloud.xyz/dns-query
doh-server = /*.gov-ddns.cn/https://a.passcloud.xyz/dns-query
doh-server = /*.daliddns.cn/https://a.passcloud.xyz/dns-query
doh-server = /*.xn--mes98khzje07c.xyz/https://a.passcloud.xyz/dns-query
doh-server = /*.9218561.xyz/https://a.passcloud.xyz/dns-query
doh-server = /*.211129.xyz/https://a.passcloud.xyz/dns-query
doh-server = /*.gia.wiki/https://a.passcloud.xyz/dns-query
doh-server = /*.checkmails.xyz/https://a.passcloud.xyz/dns-query
doh-server = /*.iqyun.zone/https://a.passcloud.xyz/dns-query
doh-server = /*.ddns-pop.cyou/https://a.passcloud.xyz/dns-query

# > ğŸ‡¨ğŸ‡³ CN
# CNNIC SDNS
# ä¸­å›½æ”¿åºœç½‘
# server = /*.gov.cn/1.2.4.8
# server = /*.æ”¿åŠ¡/1.2.4.8

# > ğŸ‡­ğŸ‡° HK
# PCCW Enterprises Limited
# server = /*.pccw.com/dns1.pccw.com
# 1O1O
# server = /*.1010.com.hk/dns1.pccw.com
# csl.
# server = /*.hkcsl.com/dns1.pccw.com
# The CLUB by HKT
# server = /*.theclub.com.hk/dns1.pccw.com
# now.com
# server = /*.now.com/dns2.pccw.com
# Now E
# server = /*.nowe.com/dns2.pccw.com
# Now TV
# server = /*.now-tv.com/dns2.pccw.com
# MOOV
# server = /*.moov.hk/dns3.pccw.com
# viu
# server = /*.viu.com/dns3.pccw.com
# viu tv
# server = /*.viu.tv/dns3.pccw.com
# Hong Kong Cable Television Limited
# server = /*.hkcable.com.hk/dns1.hkcable.com.hk
# i-CABLE
# server = /*.i-cable.com/dns2.hkcable.com.hk
# CABLE TV Service
# server = /*.cabletv.com.hk/dns2.hkcable.com.hk
# KDDI Hong Kong Limited
# server = /*.hk.kddi.com/apple.kdd.net.hk

# > ğŸ‡¹ğŸ‡¼ TW
# ä¸­åç”µä¿¡
doh-server = /*.cht.com.tw/https://dns.hinet.net/dns-query
# ä¸­åç”µä¿¡HiNet
doh-server = /*.hinet.net/https://dns.hinet.net/dns-query
# ä¸­åç”µä¿¡emome
doh-server = /*.emome.net/https://dns.hinet.net/dns-query
# So-net Entertainment Taiwan
# server = /*.so-net.net.tw/ns1.so-net.net.tw
# server = /*.so-net.tw/ns1.so-net.net.tw
# Taiwan Network Information Center
doh-server = /*.tw/https://dns.twnic.tw/dns-query
doh-server = /*.taipei/https://dns.twnic.tw/dns-query

# > ğŸ‡ºğŸ‡¸ US
# Hurricane Electric
doh-server = /*.he.net/https://ordns.he.net/dns-query
[policy]
static=Advertising, reject, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Advertising.png
static=Streaming, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Streaming.png
static=StreamingSE, direct, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/StreamingSE.png
static=Telegram, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Telegram.png
static=Global, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Global.png
static=Apple, direct, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Apple.png
static=Domestic, direct, proxy, reject, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Domestic.png
static=Final, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Final.png

# åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å„åœ°åŒºèŠ‚ç‚¹
#available=Hong Kong, server-tag-regex=(?=.*(é¦™æ¸¯|HK|(?i)Hong))^((?!(æ‰‹æ¸¸|æ¸¸æˆ(?i)Game)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Hong_Kong.png
#available=Taiwan, server-tag-regex=(?=.*(å°æ¹¾|å°ç£|å°åŒ—|TW|(?i)Taiwan))^((?!(æ‰‹æ¸¸|æ¸¸æˆ(?i)Game)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Taiwan.png
#available=Japan, server-tag-regex=(?=.*(æ—¥æœ¬|ä¸œäº¬|æ±äº¬|å¤§é˜ª|JP|(?i)Japan))^((?!(æ‰‹æ¸¸|æ¸¸æˆ(?i)Game)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Japan.png
#available=Singapore, server-tag-regex=(?=.*(æ–°åŠ å¡|ç‹®åŸ|SG|(?i)Singapore))^((?!(æ‰‹æ¸¸|æ¸¸æˆ(?i)Game)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Singapore.png
#available=United States, server-tag-regex=(?=.*(ç¾å›½|ç¾åœ‹|æ´›æ‰|è¥¿é›…|è·å¡|US|(?i)States|American))^((?!(æ‰‹æ¸¸|æ¸¸æˆ(?i)Game)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/United_States.png

#
# "tag" å’Œ "enabled" å‚æ•°æ˜¯å¯é€‰å‚æ•°
# é»˜è®¤æ‰€æœ‰è¿œç¨‹èµ„æºçš„åŒæ­¥æ—¶é—´é—´éš”æ˜¯ 172800s (48h)
# ä½ å¯ä»¥å°†ä½¿ç”¨ç±»ä¼¼ update-interval=172800 çš„æ–¹å¼å»è‡ªå®šä¹‰åŒæ­¥æ—¶é—´é—´éš” (å•ä½: ç§’), å¦‚æœ update-internal çš„æ•°å€¼è®¾ç½®ä¸ºè´Ÿæ•°, åˆ™ä¼šç¦ç”¨è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ 
#
[server_remote]

#
# "tag", "force-policy" å’Œ "enabled" æ˜¯å¯é€‰å‚æ•°.
# å½“è®¾ç½® force-policy å‚æ•°æ—¶, è¿œç¨‹èµ„æºçš„ filter ä¸­æŒ‡å®šçš„ç­–ç•¥å°†ä¼šè¢«å¿½ç•¥, è€Œä¼šå¼ºåˆ¶ä½¿ç”¨ force-policy æŒ‡å®šçš„ç­–ç•¥.
#
[filter_remote]
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=Unbreak, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list, tag=Advertising, force-policy=Advertising, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list#type=domain-set, tag=Advertising+, force-policy=Advertising, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list, tag=Privacy, force-policy=Advertising, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list, tag=Hijacking, force-policy=Advertising, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=Streaming, force-policy=Streaming, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list, tag=StreamingSE, force-policy=StreamingSE, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=Global, force-policy=Global, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, tag=Apple, force-policy=Apple, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, tag=China, force-policy=Domestic, update-interval=172800, opt-parser=true, enabled=true

#
# "tag" å’Œ "enabled" æ˜¯å¯é€‰å‚æ•°.
#
[rewrite_remote]
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=General, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=Block Advertising, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/AdvertisingPlus.conf, tag=Block Advertising+, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/YouTubeAds.conf, tag=YouTubeAds, update-interval=172800, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJS, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Weather.qxrewrite, tag=ï£¿ iRingo for Apple Weather, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Location.qxrewrite, tag=ï£¿ iRingo for Location Services, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Siri.qxrewrite, tag=ï£¿ iRingo for Siri & Search, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/TV.qxrewrite, tag=ï£¿ iRingo for ï£¿TV app, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/News.qxrewrite, tag=ï£¿ Unlock Apple News ğŸ‡ºğŸ‡¸US, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DualSubs/DualSubs/main/qxrewrite/DualSubs.qxrewrite, tag=ğŸ¿ï¸ DualSubs for Streaming Media, update-interval=172800, opt-parser=false, enabled=false
https://raw.githubusercontent.com/DualSubs/DualSubs/main/qxrewrite/DualSubs.YouTube.qxrewrite, tag=ğŸ¿ï¸ DualSubs for YouTube, update-interval=172800, opt-parser=false, enabled=false

#
# åªæœ‰åœ¨ obfs æ··æ·†æ–¹å¼ä¸º obfs=http, obfs=ws, obfs=wss æ—¶æ‰èƒ½å¡«å†™å¯é€‰çš„ obfs-uri å‚æ•°.
# åœ¨ wss æ··æ·†æ–¹å¼ä¸­, obfs-host å‚æ•°å°†è¢«ç”¨æ¥è¿›è¡Œ TLS æ¡æ‰‹å’Œè®¾ç½® HTTP è¯·æ±‚å¤´ä¸­çš„ host å­—æ®µ, å¦‚æœä½¿ç”¨ wss æ··æ·†æ–¹å¼è€Œä¸é…ç½® obfs-host, å°†ä¼šä½¿ç”¨æœåŠ¡å™¨åœ°å€ä½œä¸ºæ··æ·†åŸŸå.
# å½“ä½¿ç”¨ obfs=ws å’Œ obfs=wss çš„æ··æ·†æ–¹å¼æ—¶, æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ v2ray-plugin (mux = 0),v2ray-core, trojan-go å®Œæˆéƒ¨ç½².
# æ³¨æ„: shadowsocks çš„ udp-over-tcp åªæœ‰éƒ¨ç½²äº† shadowsocksr python ç‰ˆæœ¬çš„æœåŠ¡å™¨æ‰æ”¯æŒ, å…¶ä»–ç‰ˆæœ¬åªæ”¯æŒUDPä¸­ç»§æœ¬èº«. å¦‚æœä½ å°† udp-relay å’Œ udp-over-tcp ç”¨äº shadowsocks, åˆ™å¿…é¡»ç¡®ä¿ä½ çš„æœåŠ¡å™¨éƒ¨ç½²äº† shadowsocksr python ç‰ˆæœ¬.
# æ³¨æ„: obfs=tls ä¸ obfs=over-tls ä¸åŒ. obfs=tls æ˜¯ shadowsocks é¡¹ç›®ç›¸å…³çš„æ··æ·†æ’ä»¶, åªæ˜¯å¯¹ TLS åè®®çš„æ··æ·†. obfs=over-tls æ˜¯ TLS åè®®. Quantumult X æ”¯æŒshadowsocksçš„è¿™ä¸¤ç§åè®®.
# obfs æ’ä»¶ tls1.2_ticket_auth æ¯” tls1.2_ticket_fastauth å’Œ obfs tls å¤šä¸€æ¬¡ RTT, å› æ­¤æ›´å»ºè®®ä½¿ç”¨ tls1.2_ticket_fastauth
# chacha20-ietf-poly1305 å’Œ chacha20-poly1305 è¿™ä¸¤ç§åŠ å¯†æ–¹å¼åœ¨ VMess é…ç½®ä¸­æ•ˆæœç›¸åŒ.
# ç”¨äº SSL pinning çš„ tls-cert-sha256 æˆ– tls-pubkey-sha256 å¯ä»¥ç”± openssl ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ:
# openssl x509 -noout -fingerprint -sha256 -inform pem -in your-cert.pem
# openssl x509 -inform pem -pubkey -noout < your-cert.pem | openssl pkey -pubin -outform der | openssl dgst -sha256
# å¦‚æœ tls-verification ä¸º false, åˆ™ tls-cert-sha256 å’Œ tls-pubkey-sha256 å‚æ•°å°†è¢«å¿½ç•¥.
# å¦‚æœè®¾ç½®äº† tls-pubkey-sha256, åˆ™ tls-cert-sha256 å‚æ•°å°†è¢«å¿½ç•¥.
# tls13 å‚æ•°å·²è¢«å¼ƒç”¨ (è‡ª v1.0.26 èµ·), æ— è®ºä½ è®¾ç½®ä»€ä¹ˆ, TLS 1.3ç‰ˆæœ¬éƒ½è¢«æ”¯æŒ.
#
[server_local]



[filter_local]
# Local Area Network å±€åŸŸç½‘
host-suffix, local, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
ip-cidr, 100.64.0.0/10, direct
ip6-cidr, fe80::/10, direct

final, Final

#
# "reject" ç­–ç•¥ä¼šè¿”å› HTTP çŠ¶æ€ç  404, ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹.
# "reject-200" ç­–ç•¥ä¼šè¿”å› HTTP çŠ¶æ€ç  200, ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹.
# "reject-img" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200, åŒæ—¶é™„å¸¦ 1px gif.
# "reject-dict" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200, åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡.
# "reject-array" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200, åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON æ•°ç»„.
# "request-header" é€‚ç”¨äºæ‰€æœ‰ HTTP header, ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ­£åœ¨è¡¨è¾¾å¼ä¸­åŒ¹é…å¤šä¸ª header (åŒ…æ‹¬ CRLF).
# "echo-response" ç­–ç•¥è¿”å›åŒ¹é…çš„ URL çš„å†…å®¹ç±»å‹, body æ–‡ä»¶åº”è¯¥è¢«ä¿å­˜åœ¨æœ¬åœ° "æˆ‘çš„ iPhone - Quantumult X - Data".
# å¦‚æœ rewrite æ“ä½œä¸ body ç›¸å…³, Quantumult ä¼šè‡ªåŠ¨å¤„ç†é•¿åº¦å’Œç¼–ç ç›¸å…³çš„ HTTP header çš„å­—æ®µ, æ— éœ€è‡ªè¡Œå¤„ç†. response-body å’Œ script-response-body æœ€å¤§æ”¯æŒçš„è¿”å›ä½“å¤§å°ä¸º 1024 KB (è§£å‹å).
# å¦‚æœ body ä¸ºç©º, åˆ™ä¸ä¼šæ‰§è¡Œ body ç›¸å…³ rewrite æ“ä½œ.
# å½“åœ¨ rewrite ä¸­ä½¿ç”¨ javascript æ—¶, ä½ å¯ä»¥ä½¿ç”¨è¿™äº›å¯¹è±¡: $request, $response, $notify(title, subtitle, message), console.log(message) å’Œ Quantumult æ‰€æœ‰å†…ç½®å¯¹è±¡ (å¸¦æœ‰å‰ç¼€"$").
# æ”¯æŒ: $request.scheme, $request.method, $request.url, $request.path, $request.headers, $response.statusCode, $response.headers, $response.body.
# å½“å“åº”ä¸è¯·æ±‚æœ‰å…³æ—¶, $request.sessionIndex ç­‰æ•ˆäº $response.sessionIndex. sessionIndex ä¸æ©™è‰² "æ´»åŠ¨" é¢æ¿ä¸­çš„TCPè®°å½•çš„ç´¢å¼•æ— å…³.
# $notify(title, subtitle, message) å°†ä¼šè§¦å‘ iOS æ¨é€, å‰ææ˜¯éœ€è¦åœ¨ç³»ç»Ÿä¸­å¼€å¯ Quantumult çš„æ¨é€æƒé™.
# $prefs ç”¨æ¥æŒä¹…åŒ–å­˜å‚¨: $prefs.valueForKey(key), $prefs.setValueForKey(value, key), $prefs.removeValueForKey(key), $prefs.removeAllValues().
# console.log(message) ä¼šå°†è¾“å‡ºè®°å½•åˆ° Quantumult çš„æ—¥å¿—æ–‡ä»¶ä¸­, å‰æéœ€è¦å°† log level è®¾ç½®ä¸º debug ç­‰çº§.
# setTimeout(function() { }, interval) ä¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš” (å•ä½: æ¯«ç§’) åè¿è¡Œå‡½æ•°.
# é€‚ç”¨äº script-request-header, script-request-body, script-response-header, script-response-body å’Œ script-echo-response çš„è„šæœ¬åº”è¯¥å­˜å‚¨åœ¨æœ¬åœ° "æˆ‘çš„ iPhone - Quantumult X - Scripts" æˆ– "iCloud äº‘ç›˜ - Quantumult X - Scripts". è„šæœ¬å†…å®¹å¯ä»¥å‚è€ƒ https://raw.githubusercontent.com//crossutility/Quantumult-X
# å‚æ•° script-analyze-echo-response å’Œ script-echo-response çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…ä¼šç­‰å¾… request body.
#
[rewrite_local]

#
# $task.fetch() ä¼šæ„é€ ä¸€ä¸ª HTTP è¯·æ±‚å¹¶å¤„ç†è¿”å›, body ä»…æ”¯æŒçº¯æ–‡æœ¬. å¦‚æœä½ æƒ³ä¸²è¡Œè¯·æ±‚, ä½ å¯ä»¥å°† $task.fetch() å¯ä»¥åµŒå…¥åˆ°å¦ä¸€ä¸ª $task.fetch() çš„ completionHandler ä¸­.
# è„šæœ¬åº”è¯¥å­˜å‚¨åœ¨æœ¬åœ° "æˆ‘çš„ iPhone - Quantumult X - Scripts" æˆ– "iCloud äº‘ç›˜ - Quantumult X - Scripts". è„šæœ¬å†…å®¹å¯ä»¥å‚è€ƒ https://raw.githubusercontent.com//crossutility/Quantumult-X/blob/master/sample-task.js
# é»˜è®¤ HTTP è¯·æ±‚è¿‡æœŸæ—¶é—´æ˜¯ 10 ç§’.
#
# æ”¯æŒ 5 ä½æˆ– 6 ä½ (ä¸åŒ…æ‹¬æŒ‡ä»¤) cron è¯­æ³•. ç½‘ç»œæ”¹å˜æ—¶è§¦å‘ event-network. å½“ç”¨æˆ·ç‚¹å‡» UIAction çš„æ—¶å€™, è§¦å‘ event-interaction. event ç›¸å…³çš„ä»»åŠ¡åªæœ‰åœ¨ Quantumult X Tunnel è¿è¡Œæ—¶æ‰èƒ½è¢«è§¦å‘.
#
[task_local]
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“è§£é”æŸ¥è¯¢, img-url=arrowtriangle.right.square.system, enabled=true
0 0 6 * * * https://raw.githubusercontent.com/evilbutcher/Quantumult_X/master/check_in/idaily/idaily.js, tag=iDailyæ¯æ—¥ç¯çƒè§†é‡, img-url=https://raw.githubusercontent.com/evilbutcher/Quantumult_X/master/picture/idaily.png, enabled=false

#
# éƒ¨ç½²æœ¬åœ° HTTP æœåŠ¡å™¨, ä½¿ç”¨ JavaScript è¿›è¡Œæ•°æ®å¤„ç†.
# è¾“å…¥å˜é‡ä¸º $reqeust.url, $reqeust.path, $reqeust.headers, $reqeust.body.
# è¾“å‡ºå“åº”ä¸º $done like $done({status:"HTTP/1.1 200 OK"}, headers:{}, body:"here is a string").
# ä½ å¯ä»¥ä½¿ç”¨ç­¾åæˆ–ä»»ä½•å…¶ä»–éªŒè¯æ–¹æ³•æ¥éªŒè¯è¯·æ±‚æ˜¯å¦åˆæ³•.
# éƒ¨ç½²å®Œæˆåé€šè¿‡ http://127.0.0.1:9999/your-path/your-api/ è®¿é—®.
#
[http_backend]
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, host=boxjs.com, tag=BoxJS, path=^/, enabled=true

#
# åªæœ‰ TLS SNI æˆ– hostname ä¸­çš„ç›®çš„åœ°åœ°å€æ‰ä¼šè¢« MitM å¤„ç†.
#
# é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ MitM å¤„ç† HTTPS è¯·æ±‚æ—¶, Quantumult X ä»åŸå§‹ç«™ç‚¹è·å–è¯ä¹¦ (è¯ä¹¦å°†è¢«ç¼“å­˜), ä¿ç•™å¤§éƒ¨åˆ†éœ€è¦çš„åŸå§‹è¯ä¹¦ä¿¡æ¯å¹¶ä½¿ç”¨ MitM æ ¹ CA è¯ä¹¦é‡æ–°ç­¾å, è¿™æ˜¯åˆ›å»º MitM è¯ä¹¦çš„æ¨è (å’Œæ›´å…¼å®¹) æ–¹å¼.
# å¶å°”æœ‰äº›ç”¨æˆ·å–œæ¬¢è°ƒè¯•ä¸å­˜åœ¨åŸŸåçš„ HTTPS è¯·æ±‚, æ‰€ä»¥åŸæ¥çš„è¯ä¹¦ç”šè‡³éƒ½ä¸å­˜åœ¨. è¿™æ—¶éœ€è¦è®¾ç½®å‚æ•° simple_cert_hostname. å¸¦æœ‰ simple_cert_hostname (å’Œ hostname) ä¸­çš„ TLS SNI åç§°çš„ HTTPS è¯·æ±‚å°†ä½¿ç”¨çº¯æœ¬åœ°ç”Ÿæˆçš„ MitM è¯ä¹¦.
#
# æ³¨æ„! ! ! ä¸ºå®‰å…¨èµ·è§, è¯·å¦¥å–„ä¿ç®¡ CA å¯†ç å’Œ p12 è¯ä¹¦, åˆ‡å‹¿æ³„éœ²!
#
[mitm]
